{"remainingRequest":"/Users/luola/Desktop/git项目/christianchurch/node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!/Users/luola/Desktop/git项目/christianchurch/src/utils/request.js","dependencies":[{"path":"/Users/luola/Desktop/git项目/christianchurch/src/utils/request.js","mtime":1594976604815},{"path":"/Users/luola/Desktop/git项目/christianchurch/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/luola/Desktop/git项目/christianchurch/node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport axios from \"axios\";\nimport { VUE_APP_API_URL } from \"@utils/index\";\nvar instance = axios.create({\n  baseURL: VUE_APP_API_URL,\n  timeout: 5000\n}); // const defaultOpt = { login: true };\n\nfunction baseRequest(options) {\n  console.log(VUE_APP_API_URL);\n  return instance(options).then(function (res) {\n    var data = res.data || {};\n    if (res.status !== 200) return Promise.reject({\n      msg: \"请求失败\",\n      res: res,\n      data: data\n    });\n\n    if ([410000, 410001, 410002].indexOf(data.status) !== -1) {\n      // toLogin();\n      return Promise.reject({\n        msg: res.data.msg,\n        res: res,\n        data: data\n      });\n    } else if (data.status === 200) {\n      return Promise.resolve(data, res);\n    } else {\n      return Promise.reject({\n        msg: res.data.msg,\n        res: res,\n        data: data\n      }); // return Promise.reject(data);\n    }\n  });\n}\n/**\r\n * http 请求基础类\r\n * 参考文档 https://www.kancloud.cn/yunye/axios/234845\r\n *\r\n */\n\n\nvar request = [\"post\", \"put\", \"patch\"].reduce(function (request, method) {\n  /**\r\n   *\r\n   * @param url string 接口地址\r\n   * @param data object get参数\r\n   * @param options object axios 配置项\r\n   * @returns {AxiosPromise}\r\n   */\n  request[method] = function (url) {\n    var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    return baseRequest(Object.assign({\n      url: url,\n      data: data,\n      method: method\n    }, options));\n  };\n\n  return request;\n}, {});\n[\"get\", \"delete\", \"head\"].forEach(function (method) {\n  /**\r\n   *\r\n   * @param url string 接口地址\r\n   * @param params object get参数\r\n   * @param options object axios 配置项\r\n   * @returns {AxiosPromise}\r\n   */\n  request[method] = function (url) {\n    var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    return baseRequest(Object.assign({\n      url: url,\n      params: params,\n      method: method\n    }, options));\n  };\n});\nexport default request;",{"version":3,"sources":["/Users/luola/Desktop/git项目/christianchurch/src/utils/request.js"],"names":["axios","VUE_APP_API_URL","instance","create","baseURL","timeout","baseRequest","options","console","log","then","res","data","status","Promise","reject","msg","indexOf","resolve","request","reduce","method","url","Object","assign","forEach","params"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,SAASC,eAAT,QAAgC,cAAhC;AAEA,IAAMC,QAAQ,GAAGF,KAAK,CAACG,MAAN,CAAa;AAC5BC,EAAAA,OAAO,EAAEH,eADmB;AAE5BI,EAAAA,OAAO,EAAE;AAFmB,CAAb,CAAjB,C,CAKA;;AAEA,SAASC,WAAT,CAAqBC,OAArB,EAA8B;AAC5BC,EAAAA,OAAO,CAACC,GAAR,CAAYR,eAAZ;AACA,SAAOC,QAAQ,CAACK,OAAD,CAAR,CAAkBG,IAAlB,CAAuB,UAAAC,GAAG,EAAI;AACnC,QAAMC,IAAI,GAAGD,GAAG,CAACC,IAAJ,IAAY,EAAzB;AACA,QAAID,GAAG,CAACE,MAAJ,KAAe,GAAnB,EACE,OAAOC,OAAO,CAACC,MAAR,CAAe;AAAEC,MAAAA,GAAG,EAAE,MAAP;AAAeL,MAAAA,GAAG,EAAHA,GAAf;AAAoBC,MAAAA,IAAI,EAAJA;AAApB,KAAf,CAAP;;AAEF,QAAI,CAAC,MAAD,EAAS,MAAT,EAAiB,MAAjB,EAAyBK,OAAzB,CAAiCL,IAAI,CAACC,MAAtC,MAAkD,CAAC,CAAvD,EAA0D;AACxD;AACA,aAAOC,OAAO,CAACC,MAAR,CAAe;AAAEC,QAAAA,GAAG,EAAEL,GAAG,CAACC,IAAJ,CAASI,GAAhB;AAAqBL,QAAAA,GAAG,EAAHA,GAArB;AAA0BC,QAAAA,IAAI,EAAJA;AAA1B,OAAf,CAAP;AACD,KAHD,MAGO,IAAIA,IAAI,CAACC,MAAL,KAAgB,GAApB,EAAyB;AAC9B,aAAOC,OAAO,CAACI,OAAR,CAAgBN,IAAhB,EAAsBD,GAAtB,CAAP;AACD,KAFM,MAEA;AACL,aAAOG,OAAO,CAACC,MAAR,CAAe;AAAEC,QAAAA,GAAG,EAAEL,GAAG,CAACC,IAAJ,CAASI,GAAhB;AAAqBL,QAAAA,GAAG,EAAHA,GAArB;AAA0BC,QAAAA,IAAI,EAAJA;AAA1B,OAAf,CAAP,CADK,CAEL;AACD;AACF,GAdM,CAAP;AAeD;AAED;;;;;;;AAKA,IAAMO,OAAO,GAAG,CAAC,MAAD,EAAS,KAAT,EAAgB,OAAhB,EAAyBC,MAAzB,CAAgC,UAACD,OAAD,EAAUE,MAAV,EAAqB;AACnE;;;;;;;AAOAF,EAAAA,OAAO,CAACE,MAAD,CAAP,GAAkB,UAACC,GAAD,EAAkC;AAAA,QAA5BV,IAA4B,uEAArB,EAAqB;AAAA,QAAjBL,OAAiB,uEAAP,EAAO;AAClD,WAAOD,WAAW,CAChBiB,MAAM,CAACC,MAAP,CAAc;AAAEF,MAAAA,GAAG,EAAHA,GAAF;AAAOV,MAAAA,IAAI,EAAJA,IAAP;AAAaS,MAAAA,MAAM,EAANA;AAAb,KAAd,EAAqCd,OAArC,CADgB,CAAlB;AAGD,GAJD;;AAKA,SAAOY,OAAP;AACD,CAde,EAcb,EAda,CAAhB;AAgBA,CAAC,KAAD,EAAQ,QAAR,EAAkB,MAAlB,EAA0BM,OAA1B,CAAkC,UAAAJ,MAAM,EAAI;AAC1C;;;;;;;AAOAF,EAAAA,OAAO,CAACE,MAAD,CAAP,GAAkB,UAACC,GAAD,EAAoC;AAAA,QAA9BI,MAA8B,uEAArB,EAAqB;AAAA,QAAjBnB,OAAiB,uEAAP,EAAO;AACpD,WAAOD,WAAW,CAChBiB,MAAM,CAACC,MAAP,CAAc;AAAEF,MAAAA,GAAG,EAAHA,GAAF;AAAOI,MAAAA,MAAM,EAANA,MAAP;AAAeL,MAAAA,MAAM,EAANA;AAAf,KAAd,EAAuCd,OAAvC,CADgB,CAAlB;AAGD,GAJD;AAKD,CAbD;AAeA,eAAeY,OAAf","sourcesContent":["import axios from \"axios\";\r\n\r\nimport { VUE_APP_API_URL } from \"@utils/index\";\r\n\r\nconst instance = axios.create({\r\n  baseURL: VUE_APP_API_URL,\r\n  timeout: 5000\r\n});\r\n\r\n// const defaultOpt = { login: true };\r\n\r\nfunction baseRequest(options) {\r\n  console.log(VUE_APP_API_URL);\r\n  return instance(options).then(res => {\r\n    const data = res.data || {};  \r\n    if (res.status !== 200)\r\n      return Promise.reject({ msg: \"请求失败\", res, data });\r\n\r\n    if ([410000, 410001, 410002].indexOf(data.status) !== -1) {\r\n      // toLogin();\r\n      return Promise.reject({ msg: res.data.msg, res, data});\r\n    } else if (data.status === 200) {\r\n      return Promise.resolve(data, res);\r\n    } else {\r\n      return Promise.reject({ msg: res.data.msg, res, data });\r\n      // return Promise.reject(data);\r\n    }\r\n  });\r\n}\r\n\r\n/**\r\n * http 请求基础类\r\n * 参考文档 https://www.kancloud.cn/yunye/axios/234845\r\n *\r\n */\r\nconst request = [\"post\", \"put\", \"patch\"].reduce((request, method) => {\r\n  /**\r\n   *\r\n   * @param url string 接口地址\r\n   * @param data object get参数\r\n   * @param options object axios 配置项\r\n   * @returns {AxiosPromise}\r\n   */\r\n  request[method] = (url, data = {}, options = {}) => {\r\n    return baseRequest(\r\n      Object.assign({ url, data, method }, options)\r\n    );\r\n  };\r\n  return request;\r\n}, {});\r\n\r\n[\"get\", \"delete\", \"head\"].forEach(method => {\r\n  /**\r\n   *\r\n   * @param url string 接口地址\r\n   * @param params object get参数\r\n   * @param options object axios 配置项\r\n   * @returns {AxiosPromise}\r\n   */\r\n  request[method] = (url, params = {}, options = {}) => {\r\n    return baseRequest(\r\n      Object.assign({ url, params, method }, options)\r\n    );\r\n  };\r\n});\r\n\r\nexport default request;\r\n"]}]}